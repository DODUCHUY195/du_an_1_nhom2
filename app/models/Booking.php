<?php
class Booking extends BaseModel { public function all(){ $stmt = $this->db->query('SELECT b.*, s.depart_date, t.tour_name, u.full_name FROM booking b JOIN tour_schedule s ON b.schedule_id=s.schedule_id JOIN tour t ON s.tour_id=t.tour_id JOIN users u ON b.customer_id=u.user_id ORDER BY b.created_at DESC'); return $stmt->fetchAll(); } public function create($data){ $stmt = $this->db->prepare('INSERT INTO booking (booking_code,schedule_id,customer_id,num_adults,num_children,total_amount,deposit_amount,status) VALUES(:booking_code,:schedule_id,:customer_id,:num_adults,:num_children,:total_amount,:deposit_amount,:status)'); return $stmt->execute($data); } }
